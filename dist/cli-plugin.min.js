"use strict";var cliPlugin={settings:{},index:0,history:[],init:function(e){cliPlugin.createElements(),cliPlugin.addKeyListeners(),cliPlugin.focusInputElement()},createElements:function(){cliPlugin.containerElement=document.createElement("div"),cliPlugin.containerElement.setAttribute("class","cli-plugin"),document.body.appendChild(cliPlugin.containerElement),cliPlugin.inputElement=document.createElement("div"),cliPlugin.inputElement.setAttribute("class","input"),cliPlugin.inputElement.setAttribute("contenteditable","true"),cliPlugin.inputElement.setAttribute("tabindex","0"),cliPlugin.inputElement.setAttribute("autocomplete","off"),cliPlugin.inputElement.setAttribute("autocorrect","off"),cliPlugin.inputElement.setAttribute("autocapitalize","off"),cliPlugin.inputElement.setAttribute("spellcheck","false"),cliPlugin.containerElement.appendChild(cliPlugin.inputElement),cliPlugin.outputElement=document.createElement("div"),cliPlugin.outputElement.setAttribute("class","output"),cliPlugin.containerElement.appendChild(cliPlugin.outputElement)},focusInputElement:function(){cliPlugin.inputElement.focus()},addKeyListeners:function(){document.addEventListener("keydown",cliPlugin.registerEvent,!1),cliPlugin.inputElement.addEventListener("blur",cliPlugin.focusInputElement,!1)},removeKeyListeners:function(){document.removeEventListener("keydown",cliPlugin.registerEvent),cliPlugin.inputElement.removeEventListener("blur",cliPlugin.focusInputElement)},registerEvent:function(e){13===e.keyCode?(e.preventDefault(),cliPlugin.exec()):38===e.keyCode?(e.preventDefault(),cliPlugin.getPrevCmd(),cliPlugin.moveCursorBack()):40===e.keyCode?(e.preventDefault(),cliPlugin.getNextCmd(),cliPlugin.moveCursorBack()):[33,34,35,36,37,39].indexOf(e.keyCode)>-1&&e.preventDefault(),cliPlugin.setActiveState()},exec:function(){var e=cliPlugin.inputElement.textContent.trim();cliPlugin.inputElement.innerHTML="",cliPlugin.history.push(e);var t=document.createElement("div");t.innerHTML=e?e:"&#8203;",cliPlugin.outputElement.appendChild(t),cliPlugin.index=cliPlugin.history.length},getPrevCmd:function(){for(var e=0===cliPlugin.index&&cliPlugin.history.length>0?cliPlugin.history[0]:"";0===e.length&&cliPlugin.index>0;)e=cliPlugin.history[--cliPlugin.index];cliPlugin.inputElement.innerHTML=e},getNextCmd:function(){for(var e="";0===e.length&&cliPlugin.index<cliPlugin.history.length;)e=cliPlugin.history[++cliPlugin.index]||"";cliPlugin.inputElement.innerHTML=e},setActiveState:function(){cliPlugin.inputElement.classList.add("active"),window.clearTimeout(cliPlugin.eventTimeoutId),cliPlugin.eventTimeoutId=window.setTimeout(function(){cliPlugin.inputElement.classList.remove("active")},1e3)},destroy:function(){cliPlugin.removeKeyListeners(),cliPlugin.containerElement.parentNode.removeChild(cliPlugin.containerElement)},moveCursorBack:function(){var e,t;document.createRange?(e=document.createRange(),e.selectNodeContents(cliPlugin.inputElement),e.collapse(!1),t=window.getSelection(),t.removeAllRanges(),t.addRange(e)):document.selection&&(e=document.body.createTextRange(),e.moveToElementText(contentEditableElement),e.collapse(!1),e.select())}};